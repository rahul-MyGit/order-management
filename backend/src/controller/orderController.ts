// main logic for req, res of get request